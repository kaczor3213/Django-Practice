<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Material Design Bootstrap</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
  {% load static %}
  <!-- Bootstrap core CSS -->
  <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="{% static 'css/mdb.min.css' %}" rel="stylesheet">
  <!-- Your custom styles (optional) -->
  <link href="{% static 'css/style.css' %}" rel="stylesheet">
</head>

<body class="bg-dark    ">

  <!-- Start your project here-->
  <!--Carousel Wrapper-->
    <div id="photoslider" class="carousel slide carousel-fade" data-ride="carousel">
        <div id="photoslider_content" class="carousel-inner" role="listbox">
        
        </div>
    </div>
<form class="text-center bg-light border border-light p-5" action="#!">
{{form}}
</form>
    
      <!--/.Carousel Wrapper-->
  <!-- Start your project here-->
 
    
  <!-- SCRIPTS -->
  <!-- my script -->
  <script>  
    photoslider_block = document.getElementById("photoslider_content")
    photoslider_content = JSON.parse("{{ photos|escapejs }}")

    indices_options = ``
    slides = ``
    controls = ``

    for(var i=0; i<photoslider_content.length; i++) {
        if(i == 0) {
            indices_options += `<li data-target='#photoslider' data-slide-to="${i}" class='active'></li>`;
        }
        else {
            indices_options += `<li data-target='#photoslider' data-slide-to="${i}"></li>`;
        }
    }
    indices = `
    <!--Indicators-->
        <ol class="carousel-indicators">
            ${indices_options}
        </ol>
    <!--/.Indicators-->`

    for(var i=0; i<photoslider_content.length; i++) {
        if(i == 0) {
        slides += `
                        <div class="carousel-item active">
                            <div class="view">
                                <img class="mx-auto" src="media/${photoslider_content[i].fields.image}" alt="${photoslider_content[i].fields.title}">
                            <div class="mask rgba-black-light"></div>
                            </div>
                            <div class="carousel-caption">
                                <h3 class="h3-responsive">${photoslider_content[i].fields.title}</h3>
                            </div>
                        </div>
                    `
        }
        else {
        slides += `
                                <div class="carousel-item">
                                    <div class="view">
                                        <img class="mx-auto" src="media/${photoslider_content[i].fields.image}" alt="${photoslider_content[i].fields.title}">
                                    <div class="mask rgba-black-light"></div>
                                    </div>
                                    <div class="carousel-caption">
                                        <h3 class="h3-responsive">${photoslider_content[i].fields.title}</h3>
                                    </div>
                                </div>
                            `
        }
    }

    controls = `<!--Controls-->
                <a class="carousel-control-prev" href="#photoslider" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#photoslider" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
                <!--/.Controls-->`

    photoslider_block.innerHTML = indices + slides + controls

  </script>
  <!-- JQuery -->
  <script type="text/javascript" src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="{% static 'js/popper.min.js' %}"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="{% static 'js/mdb.min.js' %}"></script>
</body>

</html>
